!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=!1,a=document.querySelector(".simplecms__adminbar__edit-button"),c=document.querySelector(".simplecms__adminbar__save-button");a.addEventListener("click",function(){i=!0,document.body.classList.add("simplecms--edit"),q.forEach(function(e){var t=e.imageEl.getBoundingClientRect();e.iconEl.style.top=O(e.imageEl)+"px",e.iconEl.style.right=t.right-t.width+"px"}),Array.from(u).forEach(function(e){e.contentEditable="true"}),a.style.display="none",c.style.display="block",console.log("Started editing")}),c.addEventListener("click",function(){i=!1,document.body.classList.remove("simplecms--edit"),Array.from(u).forEach(function(e){e.contentEditable="false"}),a.style.display="block",c.style.display="none",console.log("Stopped editing")});var l,s=function(e,t,n){var r;return function(){var o=this,i=arguments,a=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(o,i)},t),a&&e.apply(o,i)}}(function(e,t){fetch("/simplecms/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:PAGE_NAME,name:e,value:t})})},300),u=document.getElementsByClassName("simplecms__editable"),d=r(u);try{for(d.s();!(l=d.n()).done;){var p=l.value;p.addEventListener("click",function(e){i&&(e.stopPropagation(),e.preventDefault(),e.target.focus())}),p.addEventListener("input",function(e){var t,n=e.target.dataset.name;e.target.dataset.type;t=e.target.innerText?e.target.innerText:e.target.innerHTML,s(n,t)})}}catch(e){d.e(e)}finally{d.f()}var m="",f="",g=document.querySelector(".simplecms__img-popup"),v=document.querySelector(".simplecms__img-popup__dropbox"),y=document.querySelector(".simplecms__img-popup__file-input"),h=document.querySelector(".simplecms__img-popup__dropbox-button"),_=document.querySelector(".simplecms__img-popup__bg"),b="simplecms__img-popup__dropbox--highlighted",E="simplecms__img-popup--visible";function L(e,t){m=e,f=t,g.classList.add(E),document.body.classList.add("simplecms__no-scroll")}function S(){g.classList.remove(E),document.body.classList.remove("simplecms__no-scroll")}function x(){v.classList.add(b)}function w(){v.classList.remove(b)}function A(e){var t=new FormData;t.append("file",e),t.append("page",PAGE_NAME),t.append("name",m),fetch("/simplecms/upload",{method:"POST",body:t}).then(function(e){e.json().then(function(e){"img"===f.tagName?f.src=e.url:f.style.backgroundImage="url('".concat(e.url,"')"),S()})}).catch(function(e){console.log("Failed image upload",e)})}h.addEventListener("click",function(e){y.click()}),y.addEventListener("change",function(e){var t=e.target.files;0!==t.length&&A(t[0])}),_.addEventListener("click",function(){S()}),g.addEventListener("dragenter",function(e){e.preventDefault(),e.stopPropagation(),x()},!1),g.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation(),x()},!1),g.addEventListener("dravleave",function(e){e.preventDefault(),e.stopPropagation(),w()},!1),g.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation(),w();var t=e.dataTransfer.files;0!==t.length&&A(t[0])},!1);var P,k=r(document.querySelectorAll("[data-simplecms-img]"));try{for(k.s();!(P=k.n()).done;){var T=P.value;T.classList.add("simplecms__image"),T.addEventListener("click",function(e){i&&(e.preventDefault(),e.stopPropagation(),L(e.target.dataset.simplecmsImg,e.target))})}}catch(e){k.e(e)}finally{k.f()}function O(e){var t=e.getBoundingClientRect();return t.top+window.pageYOffset+t.height/2-10}var q=[];document.querySelectorAll("[data-simplecms-bg-image]").forEach(function(e){var t=e.dataset.simplecmsBgImage,n=document.createElement("div");n.classList.add("simplecms__bg-img-edit");var r=e.getBoundingClientRect();n.style.top=O(e)+"px",n.style.right=r.right-r.width+"px",console.log(O(e)),n.innerHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'\n    <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="edit" class="'.concat(e,'" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\n        <path fill="currentColor" d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"></path>\n    </svg>\n    ')}(),n.addEventListener("click",function(){L(t,e)}),document.body.appendChild(n),q.push({imageEl:e,iconEl:n})})},function(e,t,n){e.exports=n(1)}]);